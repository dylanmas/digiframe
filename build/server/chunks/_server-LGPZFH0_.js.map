{"version":3,"file":"_server-LGPZFH0_.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/settings/_server.js"],"sourcesContent":["import fs from \"fs/promises\";\nimport { j as json } from \"../../../../chunks/index.js\";\nimport path from \"path\";\nimport { exec } from \"child_process\";\nconst filePath = path.join(process.cwd(), \"src/lib\", \"preferences.json\");\nasync function POST(request) {\n  const fileContents = await fs.readFile(filePath, \"utf-8\");\n  console.log(request.url.searchParams.get(\"category\"));\n  console.log(request.url.searchParams.get(\"data\"));\n  const data = JSON.parse(fileContents);\n  console.log(data.settingsdata.frameorientation);\n  switch (request.url.searchParams.get(\"category\")) {\n    case \"frameorientation\":\n      data.settingsdata.frameorientation = request.url.searchParams.get(\"data\");\n      break;\n    case \"brightnessdisplay\":\n      data.settingsdata.brightnessdisplay = request.url.searchParams.get(\"data\");\n      break;\n    case \"factorymode\":\n      data.settingsdata.factorymode = request.url.searchParams.get(\"data\");\n      exec(\"cp src/lib/default.json src/lib/preferences.json\", (error, stdout, stderr) => {\n        if (error) {\n          console.log(error);\n          return;\n        }\n        if (stderr) {\n          console.log(stderr);\n          return;\n        }\n        console.log(stdout);\n      });\n      break;\n    case \"power\":\n      data.settingsdata.power = request.url.searchParams.get(\"data\");\n      break;\n  }\n  Object.assign(data, request.body);\n  const tst1 = await fs.writeFile(filePath, JSON.stringify(data));\n  return json({ tst1 }, { status: 200 });\n}\nasync function GET() {\n  await fs.readFile(filePath, \"utf-8\");\n  var output = await fs.readFile(filePath, \"utf-8\");\n  output = JSON.parse(output);\n  return json({ output }, { status: 200 });\n}\nexport {\n  GET,\n  POST\n};\n"],"names":[],"mappings":"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"}