{"version":3,"file":"_server-c7HIajLX.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/image/_server.js"],"sourcesContent":["import fs from \"fs/promises\";\nimport { j as json } from \"../../../../chunks/index.js\";\nimport path from \"path\";\nimport { exec } from \"child_process\";\nconst filePath = path.join(process.cwd(), \"src/lib\", \"preferences.json\");\nasync function POST(request) {\n  const fileContents = await fs.readFile(filePath, \"utf-8\");\n  const data = JSON.parse(fileContents);\n  switch (request.url.searchParams.get(\"category\")) {\n    case \"source\":\n      data.imagedata.source = request.url.searchParams.get(\"data\");\n      break;\n    case \"transition\":\n      data.imagedata.transition = request.url.searchParams.get(\"data\");\n      break;\n    case \"delayseconds\":\n      data.imagedata.delayseconds = request.url.searchParams.get(\"data\");\n      break;\n    case \"queries\":\n      data.imagedata.queries = request.url.searchParams.get(\"data\");\n      break;\n    case \"color\":\n      data.imagedata.color = request.url.searchParams.get(\"data\");\n      break;\n    case \"URL\":\n      data.imagedata.URL = request.url.searchParams.get(\"data\");\n      break;\n    case \"showdata\":\n      data.imagedata.showdata = request.url.searchParams.get(\"data\");\n      break;\n    case \"clocktype\":\n      data.imagedata.clocktype = request.url.searchParams.get(\"data\");\n      break;\n    case \"weather\":\n      data.imagedata.weather = request.url.searchParams.get(\"data\");\n      break;\n    case \"imagedata\":\n      data.imagedata.imagedata = request.url.searchParams.get(\"data\");\n      break;\n    case \"qotd\":\n      data.imagedata.qotd = request.url.searchParams.get(\"data\");\n      break;\n    case \"ytvidid\":\n      data.imagedata.ytvidid = request.url.searchParams.get(\"data\");\n      break;\n    case \"patterntype\":\n      data.imagedata.patterntype = request.url.searchParams.get(\"data\");\n      break;\n    case \"update\":\n      data.imagedata.source = request.url.searchParams.get(\"data\");\n      exec(\"digiframe-update\", (error, stdout, stderr) => {\n        if (error) {\n          console.log(error);\n          return;\n        }\n        if (stderr) {\n          console.log(stderr);\n          return;\n        }\n        console.log(stdout);\n      });\n      break;\n  }\n  Object.assign(data, request.body);\n  const tst1 = await fs.writeFile(filePath, JSON.stringify(data));\n  return json({ tst1 }, { status: 200 });\n}\nexport {\n  POST\n};\n"],"names":[],"mappings":"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"}